"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[58],{3058:function(e,s,t){t.r(s),t.d(s,{default:function(){return E}});var o=t(1413),n=t(5671),r=t(3144),i=t(136),a=t(8557),u=t(2791),l=t(9439),c=t(4355),d="ProfileInfo_descriptionBlock__P44UX",h="ProfileInfo_mainPhoto__Vyz93",f="ProfileInfo_contact__J7uCv",p=t(184),x=function(e){var s=(0,u.useState)(!1),t=(0,l.Z)(s,2),o=t[0],n=t[1],r=(0,u.useState)(e.status),i=(0,l.Z)(r,2),a=i[0],c=i[1];(0,u.useEffect)((function(){c(e.status)}),[e.status]);return(0,p.jsxs)("div",{children:[!o&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status:"})," ",(0,p.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||"No statuse"})]}),o&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{autoFocus:!0,onChange:function(e){c(e.currentTarget.value)},onBlur:function(){n(!1),e.updateStatus(a)},value:a})})]})},j=t(7712),v=t(6139),m=t(704),b=t(6125),g=t(3079),P=t(820),k=(0,m.Z)({form:"editProfile"})((function(e){var s=e.handleSubmit,t=e.profile,o=e.error;return(0,p.jsxs)("form",{onSubmit:s,children:[(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Save"})}),o&&(0,p.jsx)("div",{className:P.Z.formSummaryError,children:o}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name:"}),(0,p.jsx)(v.Z,{placeholder:"Full name",name:"fullName",component:b.I,validate:[g.C]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job:"}),(0,p.jsx)(v.Z,{type:"checkbox",name:"lookingForAJob",component:b.I})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills:"}),(0,p.jsx)(v.Z,{component:b.g,name:"lookingForAJobDescription",placeholder:"Skills",validate:[g.C]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"}),(0,p.jsx)(v.Z,{component:b.g,name:"aboutMe",placeholder:"About me",validate:[g.C]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(e){return(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("b",{children:e}),":",(0,p.jsx)(v.Z,{placeholder:"".concat(e),name:"contacts.".concat(e),component:b.I,validate:[]})]},e)}))]})]})})),Z=t(9420),S=function(e){var s=e.profile,t=e.isOwner,o=e.goToEditMode;return(0,p.jsxs)("div",{children:[t&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:o,children:"edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Full name:"})," ",s.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job:"})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills:"})," ",s.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"})," ",s.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(s.contacts).map((function(e){return(0,p.jsx)(_,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]})},_=function(e){var s=e.contactTitle,t=e.contactValue;return(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("b",{children:s}),": ",t]})},y=function(e){var s=e.profile,t=e.status,o=e.updateStatus,n=e.isOwner,r=e.savePhoto,i=e.saveProfile,a=(0,u.useState)(!1),f=(0,l.Z)(a,2),v=f[0],m=f[1];if(!s)return(0,p.jsx)(c.Z,{});return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)("h2",{children:s.aboutMe}),(0,p.jsx)(Z.Z,{src:s.photos.large||j,className:h}),n&&(0,p.jsx)("input",{type:"file",onChange:function(e){var s;null!==(s=e.target.files)&&void 0!==s&&s.length&&r(e.target.files[0])}}),v?(0,p.jsx)(k,{initialValues:s,profile:s,onSubmit:function(e){i(e).then((function(){m(!1)}))}}):(0,p.jsx)(S,{goToEditMode:function(){m(!0)},profile:s,isOwner:n}),(0,p.jsx)(x,{status:t,updateStatus:o})]})})},A=t(4294),w="MyPosts_postsBlock__LD5wg",C="MyPosts_posts__5cFOl",I="Post_item__xSrZL",D="Post_img__CR6lg",N=function(e){return(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)("img",{src:"https://images.unsplash.com/photo-1475552113915-6fcb52652ba2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074&q=80",className:D,alt:"photo"}),e.message,(0,p.jsx)("div",{children:(0,p.jsxs)("span",{children:["like ",e.countLike]})})]})},M=(0,g.D)(15),F=(0,m.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(v.Z,{component:b.g,name:"newPostText",placeholder:"Post message",validate:[g.C,M]})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),O=function(e){var s=e.postsData.map((function(e){return(0,p.jsx)(N,{message:e.message,countLike:e.countLike},e.id)}));return(0,p.jsxs)("div",{className:w,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(F,{onSubmit:function(s){e.addPost(s.newPostText)}}),(0,p.jsx)("div",{className:C,children:s})]})},U=t(8687),T=(0,U.$j)((function(e){return{postsData:e.profilePage.postsData}}),{addPost:A.Nw.addPostActionCreator})(O),J=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsx)(y,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,saveProfile:e.saveProfile}),(0,p.jsx)(T,{})]})},L=t(6871),B=t(2932),V=t(7781),z=function(e){(0,i.Z)(t,e);var s=(0,a.Z)(t);function t(){return(0,n.Z)(this,t),s.apply(this,arguments)}return(0,r.Z)(t,[{key:"refreshProfile",value:function(){var e=+this.props.router.params.userId;e||(e=this.props.authorizedUserId),e?(this.props.getUserProfile(e),this.props.getStatus(e)):console.error("ID should exists in URI params or in state <authorizedUserId>")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s){this.props.router.params.userId!=e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)("div",{children:(0,p.jsx)(J,(0,o.Z)((0,o.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))})}}]),t}(u.Component);var E=(0,V.qC)((0,U.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:A.et,getStatus:A.lR,updateStatus:A.Nf,savePhoto:A.Ju,saveProfile:A.Ii}),(function(e){return function(s){var t=(0,L.TH)(),n=(0,L.s0)(),r=(0,L.UO)();return(0,p.jsx)(e,(0,o.Z)((0,o.Z)({},s),{},{router:{location:t,navigate:n,params:r}}))}}),B.D)(z)},2932:function(e,s,t){t.d(s,{D:function(){return c}});var o=t(1413),n=t(5987),r=(t(2791),t(6871)),i=t(8687),a=t(184),u=["isAuth"],l=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,i.$j)(l,{})((function(s){var t=s.isAuth,i=(0,n.Z)(s,u);return t?(0,a.jsx)(e,(0,o.Z)({},i)):(0,a.jsx)(r.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=58.08c9954d.chunk.js.map